<!DOCTYPE html>

<head>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script type="module" src="./main.js"></script>
  <script type="module" src="./sliders/index.js"></script>
  <link rel="stylesheet" type="text/css" href="./index.css" />
</head>
<body>
  <div id="nav-bar">
    <div>
      CrabMe Pty Ltd COVID-19 Demonstration model
    </div>
  </div>
  <section>
    <article class="d-flex justify-content-center">
      <div class="sliders-group">
        Note: this is a demonstration model only.<br />
        Please email contact@covidagentmodel.com <br />
        for assistance in creating customized models<br />
        Read the accompanying paper here.
        <br /><br />
        <div>
          <b>Select model type:</b>
          <select id="model-selection">
            <option value="compartment-model">Compartment Model</option>
            <option value="simple-agent-model">Simple Agent Model</option>
          </select>
        </div>
        <br />

        <div>
          <label for="modelDurationSlider"
            >Model duration (days): &nbsp;<span
              id="modelDurationSliderVal"
            ></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="730"
              step="1"
              value="365"
              class="slider"
              id="modelDurationSlider"
            />
          </div>
        </div>

        <div>
          <label for="numberOfPeopleSlider"
            >Number of people: &nbsp;<span id="numberOfPeopleSliderVal"></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="1000000"
              value="100000"
              class="slider"
              id="numberOfPeopleSlider"
            />
          </div>
        </div>

        <div>
          <label for="initialInfectedSlider"
            >Initial infected: &nbsp;<span id="initialInfectedSliderVal"></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="1000"
              value="100"
              class="slider"
              id="initialInfectedSlider"
            />
          </div>
        </div>

        <div>
          <label for="medianTimeUntilRecoverySlider"
            >Median time until recovery (days): &nbsp;<span
              id="medianTimeUntilRecoverySliderVal"
            ></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="50"
              step="1"
              value="14"
              class="slider"
              id="medianTimeUntilRecoverySlider"
            />
          </div>
        </div>

        <h2>Pre-intervention settings</h2>

        <div class="simple-agent-model-settings">
          <label for="connectionsPerPersonSlider"
            >Average connections per person: &nbsp;<span
              id="connectionsPerPersonSliderVal"
            ></span
          ></label>
          <div>
            <input
              type="range"
              min="1"
              max="40"
              value="20"
              class="slider"
              id="connectionsPerPersonSlider"
            />
          </div>
        </div>

        <div class="simple-agent-model-settings">
          <label for="infectionProbabilitySlider"
            >Infection probability (infections per day per contact per infected
            person): &nbsp;<span id="infectionProbabilitySliderVal"></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="0.1"
              step="0.001"
              value="0.014"
              class="slider"
              id="infectionProbabilitySlider"
            />
          </div>
          <i
            >Note: with 20 contacts per person, 0.014 represents a doubling
            every 3 days.</i
          >
        </div>

        <div class="compartment-model-settings">
          <label for="infectionRateSlider"
            >Infection rate (new infections per day per infected person):
            &nbsp;<span id="infectionRateSliderVal"></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="10"
              step="0.01"
              value="0.31"
              class="slider"
              id="infectionRateSlider"
            />
          </div>
          <i>Note: 0.031 represents a doubling every 3 days.</i>
        </div>

        <h2>Intervention settings</h2>
        <div>
          <label for="interventionStartSlider"
            >Intervention start (days, set to 0 for no intervention):
            &nbsp;<span id="interventionStartSliderVal"></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="730"
              step="1"
              value="15"
              class="slider"
              id="interventionStartSlider"
            />
          </div>
        </div>

        <div>
          <label for="interventionDurationSlider"
            >Intervention duration (days): &nbsp;<span
              id="interventionDurationSliderVal"
            ></span
          ></label>
          <div>
            <input
              type="range"
              min="0"
              max="730"
              step="1"
              value="90"
              class="slider"
              id="interventionDurationSlider"
            />
          </div>
        </div>

        <div class="simple-agent-model-settings">
          <label for="interventionConnectionReductionSlider"
            >Connections per person reduction: &nbsp;<span
              id="interventionConnectionReductionSliderVal"
            ></span
            >%</label
          >
          <div>
            <input
              type="range"
              min="0"
              max="100"
              step="1"
              value="90"
              class="slider"
              id="interventionConnectionReductionSlider"
            />
          </div>
        </div>

        <div class="simple-agent-model-settings">
          <label for="interventionInfectionProbabilityReductionSlider"
            >Infection probability reduction: &nbsp;<span
              id="interventionInfectionProbabilityReductionSliderVal"
            ></span
            >%</label
          >
          <div>
            <input
              type="range"
              min="0"
              max="100"
              step="1"
              value="0"
              class="slider"
              id="interventionInfectionProbabilityReductionSlider"
            />
          </div>
        </div>

        <div class="compartment-model-settings">
          <label for="interventionInfectionRateReductionSlider"
            >Infection rate reduction: &nbsp;<span
              id="interventionInfectionRateReductionSliderVal"
            ></span
            >%</label
          >
          <div>
            <input
              type="range"
              min="0"
              max="100"
              step="1"
              value="90"
              class="slider"
              id="interventionInfectionRateReductionSlider"
            />
          </div>
        </div>

        <br />
        <div>
          <button id="start-button">Start</button>
        </div>
      </div>
      <div>
        <div id="data-chart"></div>
      </div>
    </article>
  </section>

  <div>
    <h1>Model data</h1>
    <table id="model-table" border="1">
      <thead>
        <tr>
          <th>Day</th>
          <th>Susceptible</th>
          <th>Infected</th>
          <th>Recovered</th>
          <th>Newly infected</th>
          <th>Newly recovered</th>
        </tr>
      </thead>
      <tbody id="model-table-tbody"></tbody>
    </table>
  </div>
</body>
